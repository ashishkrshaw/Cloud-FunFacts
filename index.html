<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cloud Fun Facts ‚Äî Dark Glassmorph</title>
  <style>
    :root{
      --bg-1: #061228;
      --bg-2: #000612;
      --accent-a: #7c5cff;
      --accent-b: #3dd6d0;
      --muted: #9aa6b2;
      --btn-glow: 0 16px 44px rgba(124,92,255,0.18);
      --icon-shadow: 0 10px 30px rgba(2,6,23,0.7);
    }

    html,body{
      height:100%;
      margin:0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:
        radial-gradient(900px 500px at 12% 10%, rgba(61,214,208,0.06), transparent 8%),
        radial-gradient(700px 360px at 90% 86%, rgba(124,92,255,0.06), transparent 8%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    .watermark {
      position:fixed;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%) rotate(-12deg);
      font-weight:900;
      font-size:20vw;
      letter-spacing: -0.02em;
      color: rgba(255,255,255,0.02);
      pointer-events:none;
      user-select:none;
      z-index:0;
    }

    /* Floating icons layer (JS will move icons dynamically across the viewport) */
    .float-layer {
      position:fixed;
      inset:0;
      z-index:1;
      pointer-events:none;
      overflow:visible;
    }

    .float-item{
      position:absolute;
      width:120px;
      height:120px;
      border-radius:20px;
      background: linear-gradient(135deg, rgba(255,255,255,0.025), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(10px) saturate(140%);
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      color:var(--muted);
      font-weight:800;
      box-shadow: 0 24px 60px rgba(2,6,23,0.68);
      transform: translate3d(0,0,0);
      transition: left 6s cubic-bezier(.22,.9,.3,1), top 6s cubic-bezier(.22,.9,.3,1), transform .18s;
      mix-blend-mode: screen;
      opacity:0.98;
      will-change: left, top, transform;
      pointer-events:auto; /* so dev can inspect in devtools if needed */
    }

    .float-item .icon {
      width:64px;
      height:64px;
      margin-bottom:6px;
      filter: drop-shadow(var(--icon-shadow));
      display:block;
      object-fit:contain;
      transform: translateZ(0);
    }

    .float-item .label {
      font-size:12px;
      color:rgba(255,255,255,0.9);
      margin-top:6px;
      letter-spacing:0.02em;
      text-shadow: 0 2px 8px rgba(2,6,23,0.6);
    }

    .small { width:88px;height:88px;border-radius:14px; }
    .med { width:120px;height:120px;border-radius:18px; }
    .large { width:170px;height:170px;border-radius:22px; }

    /* Slight spin / float mix */
    @keyframes gentleSpin { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }
    .spin { animation: gentleSpin 40s linear infinite; }

    .float-item:hover { transform: scale(1.08) translateZ(0); box-shadow: 0 40px 100px rgba(124,92,255,0.28); }

    /* Main UI */
    .wrap {
      position:relative;
      z-index:6;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px;
    }

    .card {
      width:100%;
      max-width:980px;
      border-radius:20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
      border: 1px solid rgba(255,255,255,0.04);
      padding:32px;
      box-shadow: 0 36px 120px rgba(2,6,23,0.74);
      backdrop-filter: blur(16px) saturate(150%);
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:28px;
      align-items:stretch;
    }

    .left { padding: 18px; display:flex; flex-direction:column; gap:18px; min-height:260px; }
    .title { display:flex; align-items:center; gap:14px; }

    .logo-badge{
      width:72px;height:72px;border-radius:16px;
      background:linear-gradient(135deg,var(--accent-a),var(--accent-b));
      display:flex;align-items:center;justify-content:center;
      font-weight:900;color:white;font-size:28px;
      box-shadow:0 16px 40px rgba(124,92,255,0.26);
    }

    .title h1 { font-size:2rem; margin:0; letter-spacing:-0.02em; }
    .subtitle { color:var(--muted); font-size:0.98rem; margin-top:6px; }

    /* Emphasized fact box ‚Äî clearer, higher contrast, neon accent */
    .fact-box {
      background: linear-gradient(180deg, rgba(2,8,18,0.85), rgba(3,10,22,0.78));
      border-radius:18px;
      border: 1px solid rgba(124,92,255,0.12);
      padding:30px;
      min-height:180px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 26px 80px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
      font-size:1.18rem;
      color:#eaf4ff;
      line-height:1.5;
      text-align:center;
      position:relative;
      transition: box-shadow .18s ease, transform .18s ease;
    }

    .fact-box .fact-text { max-width:820px; margin:0; font-weight:700; letter-spacing:-0.01em; }

    .right { padding:18px; display:flex; flex-direction:column; gap:16px; }

    /* More visible generate button */
    .generate-btn {
      border:0;
      cursor:pointer;
      display:inline-flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      padding:16px 22px;
      border-radius:14px;
      background: linear-gradient(90deg,var(--accent-a),var(--accent-b));
      color:#021027;
      font-weight:900;
      box-shadow: var(--btn-glow);
      transition: transform .12s cubic-bezier(.2,.9,.3,1), box-shadow .12s;
      font-size:1.05rem;
      letter-spacing:0.02em;
      z-index:10;
    }
    .generate-btn:active { transform: translateY(2px) scale(.995); }
    .generate-btn:focus { outline: 3px solid rgba(61,214,208,0.12); outline-offset:4px; }
    .generate-btn[disabled] { opacity:0.7; cursor:not-allowed; }

    .meta { font-size:0.9rem; color:var(--muted); border-radius:12px; padding:12px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border:1px solid rgba(255,255,255,0.02); }
    .tech-icons{ margin-top:8px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .tech-pill{ display:inline-flex; gap:8px; align-items:center; padding:8px 10px; border-radius:999px; background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.02); color:var(--muted); font-weight:700; font-size:0.85rem; }

    .footer { margin-top:6px; color:var(--muted); font-size:0.82rem; }

    @media (max-width:980px){
      .card{ grid-template-columns: 1fr; max-width:760px; }
      .watermark{ font-size:28vw; }
      /* hide heavy floating animation on small screens for perf */
      .float-item{ display:none; }
    }

    @media (max-width:480px){
      .card{ padding:18px; gap:14px; }
      .logo-badge{ width:52px;height:52px;font-size:18px; }
    }
  </style>
</head>
<body>
  <div class="watermark" aria-hidden="true">AWS</div>

  <div class="float-layer" aria-hidden="true">
    <!-- Keep icons as <img> referencing the icons/ folder. JS will reposition them dynamically across the viewport. -->
    <div class="float-item med spin" data-label="Lambda">
      <img class="icon" src="icons/lambda.svg" alt="Lambda icon" onerror="this.onerror=null;this.src='icons/lambda.png'"/>
      <div class="label">Lambda</div>
    </div>

    <div class="float-item med" data-label="DynamoDB">
      <img class="icon" src="icons/dynamodb.svg" alt="DynamoDB icon" onerror="this.onerror=null;this.src='icons/dynamodb.png'"/>
      <div class="label">DynamoDB</div>
    </div>

    <div class="float-item small" data-label="API Gateway">
      <img class="icon" src="icons/apigateway.svg" alt="API Gateway icon" onerror="this.onerror=null;this.src='icons/apigateway.png'"/>
      <div class="label">API GW</div>
    </div>

    <div class="float-item large" data-label="AWS">
      <img class="icon" src="icons/aws.svg" alt="AWS core icon" onerror="this.onerror=null;this.src='icons/aws.png'"/>
      <div class="label">AWS</div>
    </div>

    <!-- optional extras -->
    <div class="float-item small" data-label="RDS">
      <img class="icon" src="icons/aws-rds-svgrepo-com.svg" alt="RDS icon" onerror="this.onerror=null;this.src='icons/aws-rds-svgrepo-com.png'"/>
      <div class="label">RDS</div>
    </div>
  </div>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <div class="left">
        <div class="title" id="title">
          <div class="logo-badge">‚òÅÔ∏è</div>
          <div>
            <h1>Cloud Fun Facts</h1>
            <div class="subtitle">Modern dark glassmorph UI ‚Äî animated cloud infra background</div>
          </div>
        </div>

        <div class="fact-box" id="factBox" aria-live="polite" aria-atomic="true">
          <p id="factText" class="fact-text" style="margin:0;color:#eaf4ff;">
            Click "Generate Fun Fact" to discover a cloud fact. (Errors are logged to the console.)
          </p>
        </div>

        <div class="footer">Made with ‚ù§Ô∏è ‚Äî glassmorphism, neon accents & smooth motion</div>
      </div>

      <div class="right" aria-hidden="false">
        <button class="generate-btn" id="generateBtn" onclick="getFact()" aria-label="Generate fun cloud fact">
          <svg width="18" height="18" viewBox="0 0 24 24" style="filter:drop-shadow(0 10px 30px rgba(124,92,255,0.14))">
            <path fill="currentColor" d="M12 2L12 12 20 4z"></path>
          </svg>
          Generate Fun Fact
        </button>

        <div class="meta">
          <div style="font-weight:800;color:#cfefff;">Powered by</div>
          <div class="tech-icons" aria-hidden="false">
            <div class="tech-pill"><img src="icons/aws-lambda-svgrepo-com.svg" alt="" style="width:16px;height:16px;opacity:0.9;margin-right:6px;">AWS Lambda</div>
            <div class="tech-pill"><img src="icons/API Gateway.svg" alt="" style="width:16px;height:16px;opacity:0.9;margin-right:6px;">API Gateway</div>
            <div class="tech-pill"><img src="icons/aws-rds-svgrepo-com.svg" alt="" style="width:16px;height:16px;opacity:0.9;margin-right:6px;">DynamoDB</div>
            <div class="tech-pill"><img src="icons/aws-svgrepo-com.svg" alt="" style="width:16px;height:16px;opacity:0.9;margin-right:6px;">AWS</div>
          </div>
        </div>

        <div class="meta" id="statusBox">
          API status: <span id="apiStatus">Not configured</span>
        </div>

        <div style="font-size:0.82rem;color:var(--muted);">.</div>
      </div>
    </div>
  </div>

  <script>
    // üëá REPLACE THIS WITH YOUR ACTUAL API ENDPOINT
    const API_URL = 'https://q0uudqwjq1.execute-api.eu-north-1.amazonaws.com/funfact';

    const btn = document.getElementById('generateBtn');
    const factText = document.getElementById('factText');
    const status = document.getElementById('apiStatus');

    async function getFact(){
      btn.disabled = true;
      btn.innerText = 'Loading...';
      // keep UI minimal; don't surface raw error details in UI
      factText.textContent = 'Fetching a fun cloud fact...';

      try {
        const resp = await fetch(API_URL, {cache: "no-store"});
        if(!resp.ok) {
          // log details for debugging only
          console.error('Fetch failed: Non-200 response', {status: resp.status, url: API_URL});
          throw new Error('Non-200 response: ' + resp.status);
        }
        const data = await resp.json();
        const fact = (data && (data.fact || data.message)) || JSON.stringify(data);
        factText.textContent = fact;
        status.textContent = 'OK';
      } catch (err) {
        // Important: keep troubleshooting information in console only (per request).
        console.error('Could not fetch fun fact. Check API_URL, CORS, network. Error details:', err);
        console.info('Tips: - Verify API_URL value in script. - Check CORS on API Gateway. - Open DevTools network tab to inspect requests.');
        status.textContent = 'Error';
        // show a short, non-technical UI message
        factText.textContent = 'Unable to load fact ‚Äî check console for details.';
      } finally {
        btn.disabled = false;
        btn.innerText = 'Generate Fun Fact';
      }
    }

    // icon availability check (console only)
    function checkIcons(){
      const required = ['icons/aws.svg','icons/lambda.svg','icons/dynamodb.svg','icons/apigateway.svg'];
      Promise.all(required.map(src => fetch(src, {method:'HEAD'}).then(r => r.ok).catch(()=>false)))
        .then(results => {
          const missing = required.filter((_,i) => !results[i]);
          if(missing.length){
            console.warn('Missing icon assets in icons/ folder:', missing, 'Using PNG fallbacks if available.');
          } else {
            console.info('All icon assets present.');
          }
        }).catch(err => console.error('Icon check failed', err));
    }

    // Dynamic floating: randomly reposition each .float-item periodically so icons drift across the whole screen
    function startFloating() {
      const items = Array.from(document.querySelectorAll('.float-item'));
      if(!items.length) return;

      const vw = () => Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const vh = () => Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

      function randomPos(item) {
        // keep items away from center area (main card) by a margin
        const marginX = Math.min(140, vw() * 0.12);
        const marginY = Math.min(120, vh() * 0.10);

        const safeArea = {
          left: marginX,
          top: marginY,
          right: vw() - marginX,
          bottom: vh() - marginY
        };

        // random coordinate inside safe area
        const x = Math.floor(Math.random() * (safeArea.right - safeArea.left)) + safeArea.left;
        const y = Math.floor(Math.random() * (safeArea.bottom - safeArea.top)) + safeArea.top;

        // apply with a slight offset to center the float-item on the point
        const rect = item.getBoundingClientRect();
        const left = Math.max(8, x - rect.width/2);
        const top = Math.max(8, y - rect.height/2);

        item.style.left = left + 'px';
        item.style.top = top + 'px';
      }

      // initial random placement and staggered start
      items.forEach((it, idx) => {
        it.style.transition = `left ${6 + Math.random()*4}s cubic-bezier(.22,.9,.3,1), top ${6 + Math.random()*4}s cubic-bezier(.22,.9,.3,1), transform .18s`;
        // seed position
        setTimeout(() => randomPos(it), idx * 120);
      });

      // continuous movement: pick new random positions at intervals
      const moveInterval = () => {
        items.forEach((it, idx) => {
          // each item will move on its own interval to feel organic
          const delay = 3000 + Math.random() * 5000;
          setTimeout(() => randomPos(it), Math.random() * 1000);
        });
      };

      // trigger repeated moves
      setInterval(() => {
        items.forEach(it => randomPos(it));
      }, 5000);
    }

    window.addEventListener('load', () => {
      checkIcons();
      startFloating();

      if(API_URL.includes('YOUR-API-ID') || API_URL.includes('execute-api') && API_URL.includes('amazonaws.com') === false){
        // console-only guidance if API is not properly configured
        console.warn('API_URL appears to be a placeholder. Update API_URL in index.html to your API Gateway endpoint.');
        document.getElementById('apiStatus').textContent = 'Missing';
      } else {
        document.getElementById('apiStatus').textContent = 'Configured';
      }
    });

    // reposition on resize for stability
    window.addEventListener('resize', () => {
      // nudge icons to new valid positions
      document.querySelectorAll('.float-item').forEach(it => {
        // recalc after short delay when resizing stops
        setTimeout(() => {
          // keep current positions but ensure still inside viewport
          const rect = it.getBoundingClientRect();
          const vwVal = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
          const vhVal = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
          const left = Math.min(Math.max(8, rect.left), vwVal - rect.width - 8);
          const top = Math.min(Math.max(8, rect.top), vhVal - rect.height - 8);
          it.style.left = left + 'px';
          it.style.top = top + 'px';
        }, 140);
      });
    });
  </script>
</body>
</html>